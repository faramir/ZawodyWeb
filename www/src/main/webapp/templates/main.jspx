<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core" xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich" xmlns:zw="http://zawodyweb.mat.umk.pl/">
    <f:loadBundle basename="pl.umk.mat.zawodyweb.www.Messages" var="messages" />
    <head>
        <title>
            <ui:insert name="pageTitle" />
        </title>
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/media/images/favicon.ico" type="image/x-icon" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="Pragma" content="no-cache" />
        <a4j:loadStyle media="screen, projection" src="/media/css/style.css" />
        <a4j:loadStyle media="screen, projection" src="/media/css/jquery.alerts.css" />
        <a4j:loadScript src="resource://jquery.js"/>
        <a4j:loadStyle media="screen, projection" src="/media/css/jquery-ui-1.7.1.custom.css" />
        <a4j:loadScript src="/media/javascript/jquery-ui-1.7.1.custom.min.js" />
        <a4j:loadScript src="/media/javascript/jquery.jclock-2.1.1.js" />
        <a4j:loadScript src="/media/javascript/jquery.alerts.js" />
    </head>
    <body id="home">
        <rich:jQuery selector="#alerts" name="confirm" timing="onJScall" query="alerts{jConfirm('Usunąć '+param.nazwa+'?', 'Usuwanie', function(r){if(r){window.location=param.link}})}" />
        <h:graphicImage alt="logo" url="/media/images/logo.png" />
        <p id="jclock" class="jclock">
        </p>
        <rich:jQuery selector="#jclock" name="jclock" query="jclock({format:'%d %B %Y r. %H:%M:%S'})" timing="onload"/>
        <h1>${messages.wmii}</h1>
        <h2>${messages.uni}</h2>
        <div id="page">
            <h1>
                <c:if test="#{sessionBean.currentContest != null}">
                    ${sessionBean.currentContest.name}
                </c:if>
            </h1>
        </div>
        <div class="logo">
            <h:graphicImage alt="logo" url="/media/images/logo1.png" />
        </div>
        <div id="left_menu">
            <ul>
                <li>
                    <zw:contest-link contest="${sessionBean.currentContest}" type="problems" message="#{messages.problems}" />
                </li>
                <li>
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/ranking.html">${messages.ranking}</h:outputLink>
                </li>
                <li>
                    <zw:contest-link contest="${sessionBean.currentContest}" type="questions" message="#{messages.questions}" />
                </li>
                <li>
                    <zw:contest-link_button contest="${sessionBean.currentContest}" type="submissions" message="#{messages.submissions}" />
                </li>
                <li>
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/regulamin.html">${messages.rules}</h:outputLink>
                </li>
            </ul>
        </div>
        <c:if test="#{sessionBean.loggedIn}">
            <div class="welcomeClass">
                <h:outputText id="welcome" styleClass="">#{messages.welcome} #{sessionBean.currentUser.login}</h:outputText>
            </div>
        </c:if>
        <div id="top_menu">
            <ul>
                <li>
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/start.html">${messages.contest}</h:outputLink>
                </li>
                <li>
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/profil.html" rendered="#{sessionBean.loggedIn}" >${messages.profile}</h:outputLink>
                </li>
                <li>
                    <zw:problem-link_button problem="${requestBean.currentProblem}" message="${messages.send_now}" type="submit" />
                </li>
                <li class="prawa">
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/about.html">${messages.about_zawodyweb}</h:outputLink>
                </li>
                <li class="prawa">
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/register.html" rendered="#{!(sessionBean.loggedIn)}" >${messages.registration}</h:outputLink>
                </li>
                <li class="prawa">
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/login.html" rendered="#{!(sessionBean.loggedIn)}" >${messages.log_in}</h:outputLink>
                    <h:outputLink value="#{facesContext.externalContext.requestContextPath}/logout.html" rendered="#{sessionBean.loggedIn}" >${messages.log_out}</h:outputLink>
                </li>
            </ul>
        </div>
        <div id="content">
            <ui:insert name="pageContent" />
        </div>
    </body>
</html>
